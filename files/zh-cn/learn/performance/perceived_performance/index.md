---
title: 感知性能
slug: Learn/Performance/Perceived_performance
---

{{LearnSidebar}}{{PreviousMenuNext("Learn/Performance/what_is_web_performance", "Learn/Performance/Measuring_performance", "Learn/Performance")}}

**[感知性能](/zh-CN/docs/Glossary/Perceived_performance)** 是用户对网站速度的感受。用户如何看待性能与任何客观统计数据一样重要，甚至更重要，但它是主观的，并且不易测量。感知性能是用户视角，而不是指标。

本文简要介绍了感知性能，着眼于用户的感知，以及可以使用哪些客观工具来衡量这类主观因素。

<table class="learn-box standard-table">
  <tbody>
    <tr>
      <th scope="row">前提：</th>
      <td>
        基础计算机知识，<a
          href="/zh-CN/Learn/Getting_started_with_the_web/Installing_basic_software"
          >基本软件安装</a
        >，
        <a href="/zh-CN/docs/Learn/Getting_started_with_the_web"
          >客户端 web 技术</a
        >的基础知识
      </td>
    </tr>
    <tr>
      <th scope="row">目标</th>
      <td>基本了解用户对 Web 性能的看法。</td>
    </tr>
  </tbody>
</table>

性能是关于用户视角的。网站加载和渲染的感觉速度对用户体验的影响大于网站实际加载和渲染的速度。即使某个操作会花费很长时间（可能是由于延迟或主线程（[main thread](/zh-CN/docs/Glossary/Main_thread)）不可用），通过显示一个加载旋转器，或一系列有用的提示和建议（或笑话，或任何你认为合适的内容），也可以在用户等待时保持他们的参与度。这种方法比什么都不显示要好得多，什么都不显示会让用户感觉等待的时间更长，可能还会让用户认为网站出了故障并放弃等待。

## 感知性能

用户对你的网站加载速度以及响应速度的**感知**至关重要；这甚至比实际的下载时间更重要，但却难以量化。你的网站可能有些部分无法加快速度，但即便在其他章节讨论的指标无法提高时，你也可以让它们给用户的感觉是**更快**的。

目前没有一种万能的指标可以量化用户的感受，但是这些指标在评估改进（和退步）方面是有用的。相关的衡量指标包括首次有意义绘制（FMP）、最大内容绘制（LCP）、可交互时间（TTI）、渲染开始时间、DOM 可交互时间和速度指数。

**首次绘制 [First paint](/zh-CN/docs/Glossary/First_paint)** 由浏览器报告，并提供页面开始变化的时间（以毫秒为单位）；但这种变化可能是简单的背景颜色更新，或者更不那么显眼的内容。它并不表示加载完成，并且有可能会在没有可见内容被绘制的时候报告时间。**首次有意义绘制（FCP，[First Contentful Paint](/zh-CN/docs/Glossary/First_contentful_paint)）** 报告了浏览器首次绘制任何值得注意的内容的时间，无论是文本、前景或背景图像，或者画布或 SVG；捕捉加载体验的最初阶段。但是，仅仅因为有内容，并不意味着它是有用的内容，或者用户有内容可供消费。**首次有意义绘制（FMP，[First Meaningful Paint](/zh-CN/docs/Glossary/first_meaningful_paint)）** 是指内容出现在屏幕上的时间，该内容实际上具有意义；这是用户感知加载体验的更好度量标准，但仍然不是理想的。**最大内容绘制（LCP）** 指标，在 [Largest Contentful Paint API](https://wicg.github.io/largest-contentful-paint/) 中定义，报告了在视口中可见的最大内容元素的渲染时间。

**速度指数（[Speed index](/zh-CN/docs/Glossary/Speed_index)）** 也被用来近似估算感知性能：它测量屏幕可见区域内像素被绘制的平均时间。这个指标没有考虑到抖动，也没有高权重地考虑对用户更重要的内容，因此它并不是一个完美的指标。

这些指标与网站的初始加载和渲染有关。确保用户开始与网站交互之后，网站依然感觉快速，这同样重要。对此，**可交互时间（[time to interactive](/zh-CN/docs/Glossary/Time_to_interactive)）** 是一个很好的指标；它指的是加载过程中最后一个**长任务（[long task](/zh-CN/docs/Glossary/Long_task)）** 完成，且用户界面在无延迟情况下可进行交互的那一刻。

用户界面的缺乏响应性和卡顿都会损害感知性能。尽管某些任务可能需要较长时间，但仍有方法使其看起来更快。有若干技巧可以用来提高感知性能。

### 提升感知性能

了解网络知识、浏览器的工作原理、用户对时间的感知等，可以帮助你更好地理解如何改善用户交互体验。然而，你并不需要深入了解所有事物的工作细节，包括人类心理的工作机制，就能提高速度的感知。

某件事给人的快感或慢感很大程度上取决于用户是在主动等待还是被动等待。等待可以分为主动阶段和被动阶段。当用户活跃时——移动鼠标、思考、被娱乐，他们处于主动阶段。被动阶段发生在用户被动等待时，例如盯着单色屏幕。如果被动和主动等待的时间客观上是相等的，用户会估计被动等待期比主动的长。如果加载、渲染或响应时间无法进一步客观地减少，那么将等待从被动转变为主动等待可以使其感觉更快。

有许多技巧和方法可以遵循。如果你想深入了解，其中一些快速的技巧有完整的文章说明。

尽可能快地显示内容，或至少页面的某个部分，并标明内容正在加载，这对于提高感官性能至关重要。例如，由于页面渲染受到加载和解析 CSS 和 JavaScript 的阻塞，所以最初减少需要加载的 CSS 和 JavaScript 的量将对改善感知性能产生重大影响。即使字节量可能相同，但不阻塞页面的渲染会让加载感觉上更快。

这里有一些技巧有助于提升性能：

### 最小化初始加载

要提升可感知性能，请最小化页面初始加载。换句话说，首先下载将实际显示的所有内容，但仅下载实际使用的内容，然后下载其余内容。因为最终要下载所有资源，所以实际上资源总量并没有改善——实际上还需要增加一些代码。但因为暂不需要的资源被延后加载了，所以用户并不会感知资源量的增加，而会感受到页面加载更快了。

为了最大程度地[减少初始加载资源](https://onilab.com/blog/perceived-performance-vs-actual-load-time-5-secrets-of-lightning-fast-magento-store/)，请从内容中分离交互式功能，以便优先加载初始化时所需的可见内容——**文本、样式和图像**。延迟加载其余资源。

不要加载初始页面未使用或看不到的图像或脚本，而在页面可用后延时加载，或在需要使用时按需加载。在初始页面加载之后加载其他资源可提高感知性能。在初始请求中加载基本数据，并仅根据需要逐步加载功能部件和数据，有助于改善低带宽和低规格硬件的体验。

此外，你应该优化需加载的资源。图片和视频应以最佳格式、压缩后的大小和正确尺寸进行投放。

### 防止内容跳转和其他重排

图片或其他资源导致内容下移或跳转到不同位置，如第三方广告的加载，会让页面感觉仍在加载中，这对感知性能是不利的。当内容重排不是由用户交互触发时，尤其会损害用户体验。如果某些资源的加载速度比其他资源慢，在其他内容已经显示在屏幕上之后才加载这些元素，那么就需要提前规划，在布局中为它们留出空间，以便内容不会跳动或改变大小，尤其是在网站已变得可交互之后。

### 避免字体文件延迟

字体的使用既可以帮助也可以损害用户体验。选择合适的字体是一种艺术形式，能极大地改善用户体验。但字体也可能损害用户体验，尤其是当所用字体需要导入时，如果导入不是最佳方式，或者使用了 Comic Sans 字体（开个玩笑）。未经样式设置的文字闪烁和文字缺失都会对性能产生不良影响。

要使备选字体的大小和粗细与主要字体一致，这样当字体加载时，页面的变化不会那么明显。

### 交互类元素是可交互的

确保可见的交互元素始终是可交互和响应的。如果输入元素是可见的，用户应该能够无延迟地与它们交互。当响应时间超过 50 毫秒时，用户会感觉到延迟。当内容重绘速度慢于 16.67 毫秒（或每秒 60 帧），或者重绘间隔不均匀时，他们会感觉页面卡顿不流畅。

将类似于即时输入的功能作为逐步增强的一部分：使用 CSS 来显示输入模态框，然后使用 JavaScript 在可用的情况下添加即时输入或自动完成功能。

### 使任务启动器显得更具交互性

在按下按键而不是等待按键弹起时发出请求，可以使感知的内容加载减少 200 毫秒。在 Keyup 后添加一个有趣但不显眼的 200 毫秒动画，甚至可以再降低 200 毫秒的加载感知。你并没有节省 400 毫秒的时间，但是用户直到真正等待内容时，才感觉到他们在等待内容。

## 总结

通过将尽可能多的下载、渲染和等待时间转变为活跃阶段，并减少任何非活跃的等待，即使客观测量值保持不变，用户也会感觉内容下载、渲染和响应更快了。现在我们知道了应该加速什么，让我们来看看一些指标，并学习如何测量这些事件。

{{PreviousMenuNext("Learn/Performance/what_is_web_performance", "Learn/Performance/Measuring_performance", "Learn/Performance")}}
