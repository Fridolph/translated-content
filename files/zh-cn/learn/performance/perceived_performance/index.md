---
title: 感知性能
slug: Learn/Performance/Perceived_performance
---

{{LearnSidebar}}{{PreviousMenuNext("Learn/Performance/what_is_web_performance", "Learn/Performance/Measuring_performance", "Learn/Performance")}}

**[感知性能](/zh-CN/docs/Glossary/Perceived_performance)** 是用户对网站速度的感受。用户如何看待性能与任何客观统计数据一样重要，甚至更重要，但它是主观的，并且不易测量。感知性能是用户视角，而不是指标。

本文简要介绍了感知性能，着眼于用户的感知，以及可以使用哪些客观工具来衡量这类主观因素。

<table class="learn-box standard-table">
  <tbody>
    <tr>
      <th scope="row">前提：</th>
      <td>
        基础计算机知识，<a
          href="/zh-CN/Learn/Getting_started_with_the_web/Installing_basic_software"
          >基本软件安装</a
        >，
        <a href="/zh-CN/docs/Learn/Getting_started_with_the_web"
          >客户端 web 技术</a
        >的基础知识
      </td>
    </tr>
    <tr>
      <th scope="row">目标</th>
      <td>基本了解用户对 Web 性能的看法。</td>
    </tr>
  </tbody>
</table>

性能是关于用户视角的。网站加载和渲染的速度给用户的体验带来比实际加载和渲染速度更大的影响。即使一个操作将花费很长时间（因为延迟或主线程不可用），也可以通过显示加载旋转器，或一系列有用的提示和建议（或笑话，或其他你认为合适的内容）来保持用户的参与。这种方式比什么都不显示要好得多，否则会让用户感觉花费的时间更长，可能会导致用户认为网站出了问题而放弃。

## 感知性能

网站加载速度和对用户交互的响应感如何被感知，至关重要；甚至比实际下载时间更重要，但很难量化。您的网站可能有一些区域，可能无法使其加载更快，但即使在其他部分讨论的指标无法改进的情况下，您仍可以让用户感觉到加载更快。

虽然没有一种理想的指标可以准确衡量用户的感受，但指标在衡量改进（和退化）方面是有用的。相关的测量指标包括首次有意义绘制（FMP）、最大内容绘制（LCP）、互动时间（TTI）、渲染开始、DOM 交互和速度指数。

**首次绘制[First paint](/zh-CN/docs/Glossary/First_paint)** 由浏览器报告，并提供页面开始变化的时间（以毫秒为单位）；但这种变化可能是简单的背景颜色更新，或者更不那么显眼的内容。它并不表示加载完成，并且有可能会在没有可见内容被绘制的时候报告时间。**首次有意义绘制 [First Contentful Paint](/zh-CN/docs/Glossary/First_contentful_paint) (FCP)** 报告了浏览器首次绘制任何值得注意的内容的时间，无论是文本、前景或背景图像，或者画布或SVG；捕捉加载体验的最初阶段。但是，仅仅因为有内容，并不意味着它是有用的内容，或者用户有内容可供消费。**首次有意义绘制（FMP）[First Meaningful Paint](/zh-CN/docs/Glossary/first_meaningful_paint)** 是指内容出现在屏幕上的时间，该内容实际上具有意义；这是用户感知加载体验的更好度量标准，但仍然不是理想的。**最大内容绘制（LCP）** 指标，在 [Largest Contentful Paint API](https://wicg.github.io/largest-contentful-paint/) 中定义，报告了在视口中可见的最大内容元素的渲染时间。

**速度指数[Speed index](/zh-CN/docs/Glossary/Speed_index)** 也用于近似感知性能：它测量了可见屏幕上像素被绘制的平均时间。它不考虑抖动，也不权衡用户更看重的内容，因此并不是一个完美的指标。

这些指标与初始加载和渲染有关。同样重要的是确保用户开始与网站进行交互时，网站能够快速响应。对于这一点，**可交互时间 [time to interactive](/zh-CN/docs/Glossary/Time_to_interactive)** 是一个很好的指标；它表示加载过程中最后一个长任务完成并且UI可用以便用户进行有延迟的交互。

UI的缺乏响应性和卡顿均会影响到感知性能。即使一个任务可能需要很长时间，但仍然有方法可以让它看起来更快。有一些改善感知性能的技巧。

### 提升感知性能

对网络、浏览器工作原理、用户对时间的感知等方面的了解，可以更好地帮助您理解如何改善用户交互。然而，并不需要深入了解所有事情的内部机理，包括人类思维的工作方式，也可以改善速度感知。

某件事情的感觉花费时间快慢很大程度上取决于用户是主动还是被动地等待它发生。等待可以有主动和被动阶段。当用户是主动的时候 - 移动鼠标、思考、被娱乐时，他们处于主动阶段。被动阶段是指用户被 passively waiting 等待，比如盯着单色屏幕。如果主动等待和被动等待的时间在客观上是相等的，用户会认为被动等待期更长。如果加载、渲染或响应时间不能再客观地最小化，将等待转变为主动等待而不是被动等待可以让它感觉更快。

有一些可遵循的技巧和窍门。其中一些快速技巧有详细的文章，如果您想深入了解。

尽快显示内容或至少页面的某些部分，并指示内容正在加载对于改善感知性能至关重要。例如，由于页面渲染被加载和解析 CSS 和 JavaScript 阻塞，最小化初始加载所需的 CSS 和 JS 的数量将对改善感知性能产生重大影响。即使字节可能相同，但不阻塞页面渲染会让加载感觉更快。

这里有一些技巧有助于提升性能：

### 最小化初始加载

要提升可感知性能，请最小化页面初始加载。换句话说，首先下载将实际显示的所有内容，但仅下载实际使用的内容，然后下载其余内容。因为最终要下载所有资源，所以实际上资源总量并没有改善——实际上还需要增加一些代码。但因为暂不需要的资源被延后加载了，所以用户并不会感知资源量的增加，而会感受到页面加载更快了。

为了最大程度地[减少初始加载资源](https://onilab.com/blog/perceived-performance-vs-actual-load-time-5-secrets-of-lightning-fast-magento-store/)，请从内容中分离交互式功能，以便优先加载初始化时所需的可见内容——文本、样式和图像。延迟加载其余资源。

不要加载初始页面未使用或看不到的图像或脚本，而在页面可用后延时加载，或在需要使用时按需加载。在初始页面加载之后加载其他资源可提高感知性能。在初始请求中加载基本数据，并仅根据需要逐步加载功能部件和数据，有助于改善低带宽和低规格硬件的体验。

此外，你应该优化需加载的资源。图片和视频应以最佳格式、压缩后的大小和正确尺寸进行投放。

### 防止内容跳转和其他重排

图片或其他资源导致内容被向下推或跳转到不同位置，比如加载第三方广告，会让页面感觉仍在加载中，并且对感知性能有害。当用户未进行交互时，内容重排对用户体验尤为不利。如果某些资源的加载速度比其他资源慢，而某些元素在页面的其他部分已被绘制到屏幕上，则可以事先规划并在布局中留出空间，以便内容不会跳动或调整大小，尤其是在网站已经变得具有交互性之后。

### 避免字体文件延迟

使用字体既可以提高用户体验，又可能损害用户体验。选择合适的字体是一门艺术，并且可以极大地改善用户体验。字体也可能对用户体验造成损害，特别是如果使用的字体需要导入，并且导入方式不够理想，或者要是使用了Comic Sans字体(开玩笑)。未经样式化的文本出现闪烁和缺失文本都会影响性能。

确保备用字体与正式字体具有相同的大小和粗细，这样在字体加载时页面变化就不会那么明显。

### 交互类元素是可交互的

确保可见的交互元素始终是交互式和响应迅速的。如果输入元素是可见的，用户应该能够与其进行交互而不会有延迟。当某些操作需要超过50毫秒的反应时间时，用户会感到有些迟缓。当内容重绘速度慢于16.67毫秒（或60帧每秒），或以不规则的间隔进行重绘时，用户会感觉页面不流畅。

使用CSS显示输入模态，这样的功能应该作为一种渐进式增强。如：使用JavaScript在可用时添加`autocomplete`功能。

### 使任务启动器显得更具交互性

在按下按键而不是等待按键弹起时发出请求，可以使感知的内容加载减少 200 毫秒。在 KEYUP 后添加一个有趣但不显眼的 200 毫秒动画，甚至可以再降低 200 毫秒的加载感知。你并没有节省 400 毫秒的时间，但是用户直到真正等待内容时，才感觉到他们在等待内容。

## 总结

通过将尽可能多的下载、渲染和等待时间转化为主动阶段，并减少任何被动等待时间，即使客观测量结果保持不变，用户也会感觉内容下载、渲染和响应更加迅速。既然我们已经知道应该加快速度的内容，让我们来看一些指标，并学习如何衡量这些事件。

{{PreviousMenuNext("Learn/Performance/what_is_web_performance", "Learn/Performance/Measuring_performance", "Learn/Performance")}}
